<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Design</title>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.min.js"></script>
    <script src="angular-drag-and-drop-lists.js"></script>
	<script src="design.module.js"></script>
    <script src="design.ctrl.js"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="design.css" />
</head>
<body data-ng-app="design" data-ng-controller="designCtrl as ctrl">
    <div class="container">
        <div class="row">
			<!-- Sidebar -->
			<div class="col-md-2">
				<div class="toolbox box box-grey box-padding">
					<h3>New elements</h3>
					<ul>
						<li data-ng-repeat="item in ctrl.models.templates"
							dnd-type="item.type"
							dnd-draggable="item"
							dnd-effect-allowed="copy"
							dnd-copied="item.id = item.id + 1">
							<button type="button" class="btn btn-default btn-lg">{{item.type}}</button>
						</li>
					</ul>
				</div>
				<div data-ng-if="ctrl.models.selected" class="box box-grey box-padding">
					<h3>Selected</h3>
					<strong>Type: </strong> {{ctrl.models.selected.type}}
					<br><input type="text"
						data-ng-model="ctrl.models.selected.id"
						class="form-control"
						style="margin-top: 5px" />
				</div>
			</div>
		
			<!-- Main area with designs -->
			<div class="col-md-10">
				<div class="row designs box box-yellow">
					<!-- The designs also uses the list template -->
					<h3>Designs</h3>
					<ul dnd-list="ctrl.models.designs"
						dnd-allowed-types="['design']">
						<li data-ng-repeat="design in ctrl.models.designs"
							dnd-type="'design'"
							dnd-draggable="design"
							dnd-effect-allowed="move"
							dnd-moved="ctrl.models.designs.splice($index, 1)"
							dnd-selected="ctrl.models.selected = design"
							data-ng-class="{selected: ctrl.models.selected === design}">
							<div class="container-element box box-blue">
			        			<h3>Design {{design.id}}</h3>
			        			<div class="feature-panel">
									<ul dnd-list="design.features"
										dnd-allowed-types="['feature']">
			        					<li data-ng-repeat="feature in design.features"
											dnd-type="'feature'"
			            					dnd-draggable="feature"
			            					dnd-effect-allowed="move"
			            					dnd-moved="design.features.splice($index, 1)"
			            					dnd-selected="ctrl.models.selected = feature"
			            					data-ng-class="{selected: ctrl.models.selected === feature}"
			            					class="horizontal">
											<div class="feature">{{feature.id}}</div>
			        					</li>
			    					</ul>
								</div>
			        			<div class="clearfix"></div>
			    			</div>
						</li>
					</ul>
				</div>
		
				<pre>{{ctrl.modelAsJson}}</pre>
			</div>
		</div>
    </div>
</body>